# Python - é«˜çº§ç¯‡

> ä¸åŒçš„ python ç‰ˆæœ¬ï¼Œè¿è¡Œçš„ python å‘½ä»¤å¯èƒ½ä¸åŒï¼Œè¿™é‡Œä»¥ python ä¸ºä¾‹ã€‚

## å¼€å‘ç»éªŒåŠæ³¨æ„äº‹é¡¹

### ç¼–ç æ ¼å¼

- åœ¨ä½¿ç”¨ with open()æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼Œå¦‚: `with open('file.txt', 'r', encoding='utf-8') as f:`ã€‚

  å¦‚æœæ˜¯åœ¨ windows ä¸‹è¿è¡Œï¼Œé€šå¸¸éœ€è¦æŒ‡å®šç¼–ç æ ¼å¼ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°é”™è¯¯ã€‚

  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ¨¡å¼ä¸º `wb` æˆ–è€… `rb`ï¼Œåˆ™ä¸èƒ½æŒ‡å®šç¼–ç æ ¼å¼ï¼Œå› ä¸ºè¿™ä¸¤ç§æ¨¡å¼æ˜¯äºŒè¿›åˆ¶æ¨¡å¼ã€‚

- `json.dumps` é»˜è®¤ä¼šæŠŠä¸­æ–‡è½¬æ¢ä¸º unicode ç¼–ç ï¼Œå¯ä»¥é€šè¿‡ `ensure_ascii=False` å‚æ•°æ¥ä¿ç•™ä¸­æ–‡ã€‚

  å¦‚: `json.dumps(data, ensure_ascii=False)`ã€‚

### æŠ½è±¡ç±»ä¸ç»§æ‰¿

- Python ä¸­çš„æŠ½è±¡ç±»æ˜¯é€šè¿‡ `abc` æ¨¡å—å®ç°çš„ï¼ŒæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ã€‚

- æŠ½è±¡ç±»ä¸­å¯ä»¥åŒ…å«æ™®é€šæ–¹æ³•ï¼Œå­ç±»å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚

- å¯ä»¥ä½¿ç”¨ `super()` å‡½æ•°æ¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚

- æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­å®ç°ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆæ›´å¤šå†…å®¹å¯ä»¥æŸ¥çœ‹è£…é¥°å™¨éƒ¨åˆ†ï¼‰

- ğŸŒŸ åœ¨å­ç±»åˆå§‹åŒ–æ—¶ï¼Œè¦æ³¨æ„`super().__init__()`çš„è°ƒç”¨é¡ºåºï¼Œå¦‚æœçˆ¶ç±»åˆå§‹åŒ–æ—¶è°ƒç”¨äº†å­ç±»çš„æ–¹æ³•ï¼Œè¦ç¡®ä¿å­ç±»çš„å±æ€§å·²ç»åˆå§‹åŒ–ã€‚ï¼ˆè¿™ä¸ªé—®é¢˜ä¸å®¹æ˜“åœ¨ç¼–å†™ä»£ç æ—¶æ³¨æ„åˆ°ï¼Œè¦ç•™æ„ï¼‰

  ```python
    class A:
        def __init__(self):
            self.get_a()

        @abstractmethod
        def get_a(self):
            pass

    class B(A):
        def __init__(self):
            super().__init__()
            self.b = 1

        def get_a(self):
            print(self.b)
  ```

## è¿›é˜¶çŸ¥è¯†

### Python çš„æ•°æ®ç±»å‹

**é›†åˆç±»å‹**:

- list: åˆ—è¡¨ï¼Œæœ‰åºå¯å˜åºåˆ—ï¼ˆç±»ä¼¼äºæ•°ç»„ï¼‰

  å¦‚: `[1, 2, 3]`

- dict: å­—å…¸ï¼Œæ— åºé”®å€¼å¯¹é›†åˆï¼ˆå…³é”®è¯: é”®å€¼å¯¹ï¼‰

  å¦‚: `{'name': 'Alice', 'age': 18}`

- tuple: å…ƒç»„ï¼Œæœ‰åºä¸å¯å˜åºåˆ—ï¼ˆå…³é”®è¯: ä¸å¯å˜ï¼‰

  å¦‚: `(1, 2, 3)`

- set: é›†åˆï¼Œæ— åºä¸é‡å¤å…ƒç´ é›†ï¼ˆå…³é”®è¯: ä¸é‡å¤ï¼‰

  å¦‚: `{1, 2, 3}`

**æ•°æ®ç±»å‹çš„å¸¸ç”¨æ–¹æ³•**:

> æˆ‘ä¼šæ ¹æ®ä¸ªäººä½¿ç”¨çš„é¢‘ç‡æ¥æ’åºï¼Œè¶Šé å‰è¶Šè¦æŒæ¡ã€‚

- list: `append()`ã€`extend()`ã€`insert()`ã€`remove()`ã€`pop()`ã€`index()`ã€`count()`ã€`sort()`ã€`reverse()`

  `append()` åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ å…ƒç´ 

- dict: `clear()`ã€`copy()`ã€`fromkeys()`ã€`get()`ã€`items()`ã€`keys()`ã€`pop()`ã€`popitem()`ã€`setdefault()`ã€`update()`ã€`values()`

  `update()` æ›´æ–°å­—å…¸ï¼Œå°†ä¸€ä¸ªå­—å…¸çš„é”®å€¼å¯¹æ›´æ–°åˆ°å¦ä¸€ä¸ªå­—å…¸ï¼Œå¦‚æœé”®ç›¸åŒï¼Œåˆ™è¦†ç›–

  `items()` è¿”å›å­—å…¸çš„é”®å€¼å¯¹åˆ—è¡¨ï¼Œå¦‚: `[('name', 'Alice'), ('age', 18)]`

  `keys()` è¿”å›å­—å…¸çš„é”®åˆ—è¡¨

  `values()` è¿”å›å­—å…¸çš„å€¼åˆ—è¡¨

  `get()` è·å–å­—å…¸ä¸­çš„å€¼ï¼Œå¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼ï¼ˆæ¨èéƒ½ç”¨è¿™ä¸ªæ–¹æ³•æ¥è·å–ï¼Œé¿å… KeyErrorï¼‰

- tuple: `count()`ã€`index()`

- set: `add()`ã€`remove()`ã€`pop()`ã€`clear()`ã€`copy()`ã€`difference()`ã€`intersection()`ã€`union()`ã€`issubset()`ã€`issuperset()`ã€`discard()`ã€`update()`ã€`symmetric_difference()`

**å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡**

Python ä¸­çš„æ•°æ®ç±»å‹åˆ†ä¸ºå¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡ã€‚

æ˜¯å¦å¯å˜æ˜¯æŒ‡å¯¹è±¡çš„å†…å®¹æ”¹å˜åï¼Œid æ˜¯å¦ä¼šæ”¹å˜ã€‚ä¸å¯å˜å¯¹è±¡å› ä¸ºå®ƒä¸èƒ½åœ¨åŸåœ°ä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå› æ­¤ id ä¼šæ”¹å˜ã€‚

- ä¸å¯å˜å¯¹è±¡: intã€floatã€strã€tuple ç­‰

- å¯å˜å¯¹è±¡: listã€dictã€set ç­‰

```python
a = 1
print(id(a))  # 4316875464
a = 2
print(id(a))  # 4316875496
```

### Python å¸¸ç”¨æ–¹æ³•

#### å­—ç¬¦ä¸²

- `string.split()`: åˆ†å‰²å­—ç¬¦ä¸²(é»˜è®¤ä»¥ç©ºæ ¼åˆ†å‰²ï¼Œå¯ä»¥æŒ‡å®šåˆ†éš”ç¬¦)

- `string.strip()`: å»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼(é»˜è®¤å»é™¤ç©ºæ ¼ï¼Œå¯ä»¥æŒ‡å®šå»é™¤çš„å­—ç¬¦)

- `string[start:end:step]`: åˆ‡ç‰‡å­—ç¬¦ä¸²

#### æ•°å­—

- `int()`: å°†å­—ç¬¦ä¸²æˆ–æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°

- `.2f`: ä¿ç•™ä¸¤ä½å°æ•°ï¼Œå¦‚: `f'{num:.2f}'`

- `round()`: å››èˆäº”å…¥ï¼Œå¦‚: `round(1.2345, 2)` è¿”å› `1.23`

### Python å†…ç½®å‡½æ•°

**range() å‡½æ•°**

`range()` å‡½æ•°æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œå®ƒç”¨äºç”Ÿæˆä¸€ä¸ªåºåˆ—ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹å€¼ã€ç»“æŸå€¼å’Œæ­¥é•¿ã€‚

```python
for i in range(1, 10, 2):
    print(i)
```

**æ³¨æ„**: `range()` å‡½æ•°ç”Ÿæˆçš„åºåˆ—ä¸åŒ…æ‹¬ç»“æŸå€¼ã€‚æ¯”å¦‚ `range(1, 10)` ç”Ÿæˆçš„åºåˆ—æ˜¯ `[1, 2, 3, 4, 5, 6, 7, 8, 9]`ã€‚

**zip() å‡½æ•°**

`zip()` å‡½æ•°æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œå®ƒæ¥å—å¤šä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå…ƒç»„ä¸­åŒ…å«æ¯ä¸ªå¯è¿­ä»£å¯¹è±¡çš„ç›¸åŒä½ç½®çš„å…ƒç´ ã€‚

```python
for a, b in zip([1, 2, 3], ['A', 'B', 'C']):
    print(a, b)
```

**enumerate() å‡½æ•°**

`enumerate()` å‡½æ•°æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæšä¸¾å¯¹è±¡ï¼Œæšä¸¾å¯¹è±¡ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå…ƒç»„ä¸­åŒ…å«å…ƒç´ çš„ç´¢å¼•å’Œå€¼ã€‚

```python
for index, value in enumerate([1, 2, 3, 4, 5]):
    print(index, value)
```

å½“ä½ éœ€è¦å¯¹æ•°æ®è¿›è¡Œç´¢å¼•æ“ä½œæ—¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ç®€åŒ–ä»£ç å¹¶é¿å…æ‰‹åŠ¨å¤„ç†ç´¢å¼•è®¡æ•°ã€‚

**map() å‡½æ•°**

`map()` å‡½æ•°æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œ**è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œ**è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å°†å‡½æ•°åº”ç”¨äºå¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ å¾—åˆ°çš„ç»“æœã€‚

```python
def square(x):
    return x * x

print(list(map(square, [1, 2, 3, 4, 5])))
```

**super() å‡½æ•°**

`super()` å‡½æ•°æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œè¿™ä¸ªä»£ç†å¯¹è±¡å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚

```python
class A:
    def __init__(self):
        print('A.__init__')

class B(A):
    def __init__(self):
        super().__init__()
        print('B.__init__')

b = B()
```

ç®€å•ç†è§£å°±æ˜¯ï¼Œ`super()` å‡½æ•°å¯ä»¥ç›´æ¥è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸ç”¨æŒ‡å®šçˆ¶ç±»çš„åå­—ã€‚

### åå°„ä¸è£…é¥°å™¨

Python ä¸­çš„åå°„å’Œè£…é¥°å™¨æ˜¯ä¸¤ä¸ªé«˜çº§ç‰¹æ€§ï¼Œå®ƒä»¬å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Python çš„é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹ã€‚

#### åå°„åŸºç¡€çŸ¥è¯†

Python çš„åå°„æ˜¯æŒ‡é€šè¿‡å­—ç¬¦ä¸²çš„å½¢å¼æ¥æ“ä½œå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚

#### å¸¸è§çš„åå°„æ“ä½œ

- `dir(object)`: è·å–å¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚

- `type(object)`: è·å–å¯¹è±¡çš„ç±»å‹ã€‚
- `isinstance(object, classinfo)`: åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»çš„å®ä¾‹ã€‚

- `obj.__class__`: è·å–å¯¹è±¡çš„ç±»ã€‚

  `obj.__class__.__name__`: è·å–å¯¹è±¡çš„ç±»åã€‚

- `callable(object)`: åˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯è°ƒç”¨ã€‚

- `obj.__dict__`: è·å–å¯¹è±¡çš„å±æ€§å­—å…¸ã€‚

- `getattr(object, name[, default])`: è·å–å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ï¼Œå¦‚æœå±æ€§æˆ–æ–¹æ³•ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›é»˜è®¤å€¼ã€‚

- `hasattr(object, name)`: åˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šçš„å±æ€§æˆ–æ–¹æ³•ã€‚

- `setattr(object, name, value)`: è®¾ç½®å¯¹è±¡çš„å±æ€§æˆ–æ–¹æ³•ã€‚

#### è£…é¥°å™¨åŸºç¡€

è£…é¥°å™¨æ˜¯ Python çš„ä¸€ç§é«˜çº§ç‰¹æ€§ï¼Œå®ƒå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œä¸ºå‡½æ•°æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚

ç®€å•ç‚¹ç†è§£å°±æ˜¯ï¼Œè£…é¥°å™¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªæ–°çš„å‡½æ•°ä¼šåœ¨åŸå‡½æ•°æ‰§è¡Œå‰åæ‰§è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚

```python
def decorator(func):
    def wrapper(*args, **kwargs):
        print('Before function')
        result = func(*args, **kwargs)
        print('After function')
        return result
    return wrapper

@decorator
def hello():
    print('Hello, world!')

hello()
```

ä¸Šé¢çš„æ¡ˆä¾‹ç±»ä¼¼äºä¸‹é¢çš„ä»£ç :

```python
def hello():
    print('Hello, world!')

hello = decorator(hello)
hello()
```

å¦‚æœéœ€è¦ç»™è£…é¥°å™¨ä¼ é€’å‚æ•°ï¼Œå¯ä»¥åœ¨è£…é¥°å™¨å¤–å†å¥—ä¸€å±‚å‡½æ•°:

```python
def decorator_with_args(arg):
    def decorator(func):
        def wrapper(*args, **kwargs):
            print(f'Before function with arg: {arg}')
            result = func(*args, **kwargs)
            print('After function')
            return result
        return wrapper
    return decorator

@decorator_with_args('arg')
def hello():
    print('Hello, world!')

hello()
```

#### å¸¸ç”¨çš„è£…é¥°å™¨

Python çš„è£…é¥°å™¨æ˜¯ä¸€ç§é«˜çº§ç‰¹æ€§ï¼Œå®ƒå¯ä»¥åœ¨ä¸ä¿®æ”¹åŸå‡½æ•°çš„æƒ…å†µä¸‹ï¼Œä¸ºå‡½æ•°æ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚

- `@staticmethod`: å°†ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¸ºé™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•ä¸éœ€è¦ä¼ å…¥ `self` å‚æ•°ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨ã€‚

- `@abstractmethod`: å°†ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•ï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨å­ç±»ä¸­å®ç°ã€‚

- `@classmethod`: å°†ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¸ºç±»æ–¹æ³•ï¼Œç±»æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»æœ¬èº«ï¼Œé€šå¸¸å‘½åä¸º `cls`ã€‚

- `@property`: å°†ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¸ºå±æ€§ï¼Œå±æ€§æ–¹æ³•å¯ä»¥åƒå±æ€§ä¸€æ ·è®¿é—®ï¼Œä¸éœ€è¦åŠ æ‹¬å·ã€‚

**@classmethod**

`@classmethod` è£…é¥°å™¨åˆšå¼€å§‹å¯èƒ½ä¼šæœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œç±»æ–¹æ³•ä¸æ™®é€šçš„å®ä¾‹æ–¹æ³•ä¸åŒï¼Œå› ä¸ºå®ƒä»¬æ¥æ”¶ç±»æœ¬èº«ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆé€šå¸¸å‘½åä¸º clsï¼‰ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹ï¼ˆé€šå¸¸å‘½åä¸º selfï¼‰ã€‚

è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨æ²¡æœ‰åˆ›å»ºç±»çš„å®ä¾‹çš„æƒ…å†µä¸‹è°ƒç”¨ç±»æ–¹æ³•ã€‚ä»¥ä¸‹åœºæ™¯æ˜¯ç±»æ–¹æ³•éå¸¸æœ‰ç”¨çš„:

- å½“ä½ éœ€è¦åœ¨åˆ›å»ºç±»çš„å®ä¾‹ä¹‹å‰æ‰§è¡Œä¸€äº›æ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•ï¼Œæ¯”å¦‚å·¥å‚æ–¹æ³•ã€‚

  ```python
    class A:
        def __init__(self, name):
            self.name = name

        @classmethod
        def from_string(cls, string):
            name = string.split()[0]
            return cls(name)

    a = A.from_string('Alice 18')
    print(a.name)
  ```

  å¯ä»¥æ¥ä»£æ›¿æ„é€ å‡½æ•°ï¼Œæ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ `A('Alice')` æ¥åˆ›å»ºå®ä¾‹ã€‚

  å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå®ç°å·¥å‚æ¨¡å¼ï¼Œé€šè¿‡ä¼ å…¥ä¸åŒçš„å‚æ•°ï¼Œæ¥åˆ›å»ºä¸åŒçš„å®ä¾‹ã€‚

- å½“ä½ éœ€è¦è®¿é—®ç±»çš„å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•ã€‚

  ```python
    class A:
        count = 0

        def __init__(self):
            A.count += 1

        @classmethod
        def get_count(cls):
            return cls.count

    a = A()
    b = A()
    print(A.get_count())
  ```

- å½“ä½ éœ€è¦åœ¨ç±»çš„æ‰€æœ‰å®ä¾‹ä¹‹é—´å…±äº«æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•ã€‚

  ```python
    class A:
        data = []

        def __init__(self, value):
            self.value = value
            A.data.append(value)

        @classmethod
        def get_data(cls):
            return cls.data

    a = A(1)
    b = A(2)
    print(A.get_data())
  ```

**@property**

`@property` è£…é¥°å™¨ç”¨äºå°†ç±»ä¸­çš„æ–¹æ³•å®šä¹‰ä¸ºå±æ€§ã€‚å±æ€§æ–¹æ³•å¯ä»¥åƒå±æ€§ä¸€æ ·è®¿é—®ï¼Œä¸éœ€è¦åŠ æ‹¬å·ã€‚

```python
    class A:
        def __init__(self):
            self._name = 'Alice'

        @property
        def name(self):
            return self._name

        @name.setter
        def name(self, value):
            self._name = value

    a = A()
    print(a.name)
    a.name = 'Bob'
    print(a.name)
```

### Python çš„é”™è¯¯å¤„ç†

#### å¼‚å¸¸å¤„ç†

Python çš„é”™è¯¯å¤„ç†æœºåˆ¶æ˜¯é€šè¿‡ `try...except...else...finally` è¯­å¥æ¥å®ç°çš„ã€‚

- `try`: å°è¯•æ‰§è¡Œä»£ç å—ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸ï¼Œåˆ™è·³è½¬åˆ° `except` è¯­å¥å—

- `except`: æ•è·å¼‚å¸¸ï¼Œå¹¶å¤„ç†å¼‚å¸¸

- `else`: å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œ `else` è¯­å¥å—

- `finally`: æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œ `finally` è¯­å¥å—

```python
try:
    # å°è¯•æ‰§è¡Œä»£ç å—
    print(1 / 0)
except ZeroDivisionError:
    # æ•è·å¼‚å¸¸
    print('ZeroDivisionError')
else:
    # æ²¡æœ‰å¼‚å¸¸
    print('No exception')
finally:
    # æ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸
    print('Finally')
```

#### è‡ªå®šä¹‰å¼‚å¸¸

Python çš„å¼‚å¸¸æ˜¯é€šè¿‡ç»§æ‰¿ `Exception` ç±»æ¥å®ç°çš„ï¼Œä½ å¯ä»¥é€šè¿‡ç»§æ‰¿ `Exception` ç±»æ¥å®šä¹‰è‡ªå·±çš„å¼‚å¸¸ã€‚

ä¸‹é¢æ˜¯æœ€ç®€å•çš„è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆè‡ªå®šä¹‰äº†å¼‚å¸¸åç§°ï¼‰:

```python
class InvaildDataException(Exception):
    pass
```

ä¸‹é¢æ˜¯è‡ªå®šä¹‰å¼‚å¸¸çš„å®Œæ•´å†™æ³•:

```python
class InvaildDataException(Exception):
    def __init__(self, message='Invaild data'):
        self.message = message
        super().__init__(self.message)
```

### Python çš„æ—¥å¿—å¤„ç†

Python çš„æ—¥å¿—å¤„ç†æ˜¯é€šè¿‡ `logging` æ¨¡å—æ¥å®ç°çš„ï¼Œ`logging` æ¨¡å—æä¾›äº†ä¸€äº›å‡½æ•°å’Œç±»ï¼Œå¯ä»¥ç”¨æ¥è®°å½•æ—¥å¿—ã€‚

#### æ—¥å¿—è®°å½•å™¨

Python çš„æ—¥å¿—è®°å½•å™¨æ˜¯é€šè¿‡ `logging.getLogger()` å‡½æ•°æ¥åˆ›å»ºçš„ï¼Œä½ å¯ä»¥é€šè¿‡ `logging.getLogger()` å‡½æ•°æ¥è·å–ä¸€ä¸ªæ—¥å¿—è®°å½•å™¨ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ—¥å¿—è®°å½•å™¨æ¥è®°å½•æ—¥å¿—ã€‚

æ—¥å¿—è®°å½•å™¨æ˜¯é€šè¿‡åå­—è¿›è¡Œç»„ç»‡å’ŒåŒºåˆ†çš„ï¼Œä½ å¯ä»¥é€šè¿‡åå­—æ¥è·å–ä¸åŒçš„æ—¥å¿—è®°å½•å™¨ã€‚

```python
import logging

logger = logging.getLogger('my_logger')
```

#### æ—¥å¿—çº§åˆ«

Python çš„æ—¥å¿—çº§åˆ«æœ‰ä»¥ä¸‹å‡ ç§:

- `logging.CRITICAL`: ä¸¥é‡é”™è¯¯çº§åˆ«ã€‚

- `logging.ERROR`: é”™è¯¯çº§åˆ«ã€‚

- `logging.WARNING`: è­¦å‘Šçº§åˆ«ã€‚

- `logging.INFO`: ä¿¡æ¯çº§åˆ«ã€‚

- `logging.DEBUG`: è°ƒè¯•çº§åˆ«ã€‚

**æ³¨æ„**: æ—¥å¿—çº§åˆ«æ˜¯å¯ä»¥è®¾ç½®çš„ï¼Œåªæœ‰å¤§äºç­‰äºè®¾ç½®çš„çº§åˆ«çš„æ—¥å¿—æ‰ä¼šè¢«è®°å½•ã€‚
å¦‚æœä½ æ²¡æœ‰è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤æ˜¯ `WARNING`ï¼Œè¿™æ„å‘³ç€åªæœ‰ `WARNING`ã€`ERROR` å’Œ `CRITICAL` çº§åˆ«çš„æ—¥å¿—ä¼šè¢«è®°å½•ã€‚

#### æ—¥å¿—å¤„ç†å™¨

Python çš„æ—¥å¿—å¤„ç†å™¨æ˜¯é€šè¿‡ `logging` æ¨¡å—ä¸­çš„å¤„ç†å™¨ç±»æ¥å®ç°çš„ï¼Œå¤„ç†å™¨ç±»æœ‰ä»¥ä¸‹å‡ ç§:

- `logging.NullHandler`: ç©ºå¤„ç†å™¨ã€‚

- `logging.StreamHandler`: è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚

- `logging.FileHandler`: è¾“å‡ºåˆ°æ–‡ä»¶ã€‚

- `logging.handlers.RotatingFileHandler`: è¾“å‡ºåˆ°æ»šåŠ¨æ–‡ä»¶ã€‚

- `logging.handlers.TimedRotatingFileHandler`: è¾“å‡ºåˆ°å®šæ—¶æ»šåŠ¨æ–‡ä»¶ã€‚

#### æ—¥å¿—æ ¼å¼åŒ–å™¨

Python çš„æ—¥å¿—æ ¼å¼åŒ–å™¨æ˜¯é€šè¿‡ `logging` æ¨¡å—ä¸­çš„æ ¼å¼åŒ–å™¨ç±»æ¥å®ç°çš„ï¼Œå¦‚:

```python
custom_handler.setFormatter(logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s'))
```

**æ ¼å¼åŒ–å­—ç¬¦ä¸²æœ‰ä»¥ä¸‹å‡ ç§**:

- `%(asctime)s`: æ—¥å¿—è®°å½•çš„æ—¶é—´ã€‚

- `%(name)s`: æ—¥å¿—è®°å½•çš„åç§°ã€‚

- `%(levelname)s`: æ—¥å¿—è®°å½•çš„çº§åˆ«ã€‚

- `%(message)s`: æ—¥å¿—è®°å½•çš„æ¶ˆæ¯ã€‚

- `%(filename)s`: æ—¥å¿—è®°å½•çš„æ–‡ä»¶åã€‚

- `%(lineno)d`: æ—¥å¿—è®°å½•çš„è¡Œå·ã€‚

- `%(funcName)s`: æ—¥å¿—è®°å½•çš„å‡½æ•°åã€‚

#### æ—¥å¿—è®°å½•å™¨çš„ä½¿ç”¨

è·å¾—æ—¥å¿—è®°å½•å™¨åï¼Œå¯ä»¥è°ƒç”¨æ—¥å¿—è®°å½•å™¨çš„æ–¹æ³•æ¥è®°å½•æ—¥å¿—ï¼Œä¸»è¦æœ‰:

- `logger.debug()`: è°ƒè¯•çº§åˆ«ã€‚

- `logger.info()`: ä¿¡æ¯çº§åˆ«ã€‚

- `logger.warning()`: è­¦å‘Šçº§åˆ«ã€‚

- `logger.error()`: é”™è¯¯çº§åˆ«ã€‚

- `logger.critical()`: ä¸¥é‡é”™è¯¯çº§åˆ«ã€‚

- `logger.log()`: è‡ªå®šä¹‰çº§åˆ«ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­:

```python
import logging

# é…ç½®æ—¥å¿—è®°å½•å™¨
logger = logging.getLogger(__name__)

# è®¾ç½®æ—¥å¿—çº§åˆ«
logger.setLevel(logging.DEBUG)

# åˆ›å»ºä¸€ä¸ªæ§åˆ¶å°å¤„ç†å™¨
ch = logging.StreamHandler()
ch.setLevel(logging.DEBUG)

# åˆ›å»ºä¸€ä¸ªæ—¥å¿—æ ¼å¼åŒ–å™¨
formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
ch.setFormatter(formatter)

# æ·»åŠ å¤„ç†å™¨åˆ°è®°å½•å™¨
logger.addHandler(ch)

# è®°å½•æ—¥å¿—
logger.info('This is a info message')
```

**basicConfig() å‡½æ•°**

`logging.basicConfig()` å‡½æ•°æ˜¯ä¸€ä¸ªå¿«é€Ÿé…ç½®æ—¥å¿—è®°å½•å™¨çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥è®¾ç½®æ—¥å¿—è®°å½•å™¨çš„çº§åˆ«ã€å¤„ç†å™¨å’Œæ ¼å¼åŒ–å™¨ï¼Œé€‚åˆç®€å•çš„æ—¥å¿—éœ€æ±‚ã€‚

ä¸‹é¢æ˜¯è®¾ç½®å¤šä¸ªå¤„ç†å™¨çš„ä¾‹å­:

```python
import logging

handler_console = logging.StreamHandler()
handler_file = logging.FileHandler("app.log", mode="w")

logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s - %(levelname)s - %(message)s",
    handlers=[handler_console, handler_file]
)

logging.info("This message will appear on both console and file.")
```

**æ³¨æ„**: `basicConfig()` å‡½æ•°åªèƒ½åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ç”Ÿæ•ˆï¼Œå¦‚æœä½ åœ¨ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä¼ å…¥äº†å‚æ•°ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡è°ƒç”¨ä¼šè¢«å¿½ç•¥ã€‚

### Python çš„æ¨¡å—å’ŒåŒ…

**from ... import ...**

`from` åé¢è·Ÿçš„æ˜¯ `.py` æ–‡ä»¶åŠå…¶è·¯å¾„ï¼Œ`import` åé¢è·Ÿçš„æ˜¯æ¨¡å—åæˆ–è€…æ¨¡å—ä¸­çš„å‡½æ•°åã€‚

æ¯”å¦‚ä¸‹é¢çš„æ–‡ä»¶ç»“æ„:

```python
-root
  |-app.py
  |-lib
    |-__init__.py
    |-model
      |-__init__.py
      |-classA.py
```

åœ¨ `app.py` ä¸­ï¼Œå¯ä»¥è¿™æ ·å¼•å…¥ `classA`:

```python
from lib.model.classA import classA
```

**\_\_init\_\_.py**

`__init__.py` æ–‡ä»¶æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå®ƒçš„å­˜åœ¨å‘Šè¯‰ Python è¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ª Python åŒ…ã€‚

æ²¡æœ‰å®ƒï¼ŒPython å°±ä¸ä¼šæŠŠè¿™ä¸ªç›®å½•å½“ä½œåŒ…æ¥å¤„ç†ï¼Œä¹Ÿå°±æ— æ³•å¼•å…¥åŒ…ä¸­çš„æ¨¡å—ã€‚

**\_\_name\_\_**

`__name__` æ˜¯ Python çš„ä¸€ä¸ªå†…ç½®å˜é‡ï¼Œå®ƒçš„å€¼å–å†³äº Python å¦‚ä½•è¿è¡Œå½“å‰çš„æ¨¡å—ã€‚

é€šå¸¸è¿™æ ·ä½¿ç”¨:

```python
if __name__ == '__main__':
    # do something
```

è¿™æ ·å¯ä»¥è®©æ¨¡å—æ—¢å¯ä»¥è¢«å¯¼å…¥ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè„šæœ¬ç›´æ¥è¿è¡Œã€‚

é€šè¿‡å°†è¦è¿è¡Œçš„è„šæœ¬ä¸­çš„ä»£ç å†™åœ¨ `if __name__ == '__main__':` ä¹‹åï¼Œé¿å…äº†åœ¨å¯¼å…¥æ¨¡å—æ—¶è¿è¡Œè„šæœ¬ä¸­çš„ä»£ç ã€‚

### Python çš„å†…å­˜ç®¡ç†

Python çš„å†…å­˜ç®¡ç†æ˜¯é€šè¿‡å¼•ç”¨è®¡æ•°å’Œåƒåœ¾å›æ”¶æœºåˆ¶æ¥å®ç°çš„ã€‚

- å¼•ç”¨è®¡æ•°: Python ä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œå¯¹è±¡è¢«é”€æ¯ã€‚

- åƒåœ¾å›æ”¶: Python é€šè¿‡åƒåœ¾å›æ”¶æœºåˆ¶æ¥å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚åƒåœ¾å›æ”¶å™¨ä¼šå®šæœŸæ£€æŸ¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼Œå½“å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œå¯¹è±¡è¢«é”€æ¯ã€‚

Python çš„åƒåœ¾å›æ”¶æœºåˆ¶æœ‰ä¸¤ç§: åˆ†ä»£åƒåœ¾å›æ”¶å’Œå¾ªç¯åƒåœ¾å›æ”¶ã€‚

- åˆ†ä»£åƒåœ¾å›æ”¶: Python å°†å¯¹è±¡åˆ†ä¸ºä¸‰ä»£ï¼Œæ¯ä»£å¯¹è±¡çš„å­˜æ´»æ—¶é—´è¶Šé•¿ï¼Œå°±è¶Šä¸å¯èƒ½è¢«é”€æ¯ã€‚Python ä¼šæ ¹æ®å¯¹è±¡çš„å­˜æ´»æ—¶é—´æ¥å†³å®šä½•æ—¶é”€æ¯å¯¹è±¡ã€‚

- å¾ªç¯åƒåœ¾å›æ”¶: Python é€šè¿‡å¼•ç”¨è®¡æ•°å’Œæ ‡è®°æ¸…é™¤ç®—æ³•æ¥å¤„ç†å¾ªç¯å¼•ç”¨çš„é—®é¢˜ã€‚å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¾ªç¯å¼•ç”¨æ—¶ï¼ŒPython ä¼šé€šè¿‡æ ‡è®°æ¸…é™¤ç®—æ³•æ¥æ£€æµ‹å’Œé”€æ¯å¾ªç¯å¼•ç”¨çš„å¯¹è±¡ã€‚

**å¦‚ä½•é¿å…å†…å­˜æ³„æ¼**

- é¿å…å¾ªç¯å¼•ç”¨: å½“å¯¹è±¡ä¹‹é—´å­˜åœ¨å¾ªç¯å¼•ç”¨æ—¶ï¼ŒPython çš„åƒåœ¾å›æ”¶æœºåˆ¶æ— æ³•æ­£ç¡®å¤„ç†ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚

- ä½¿ç”¨ `with` è¯­å¥: `with` è¯­å¥å¯ä»¥è‡ªåŠ¨å…³é—­æ–‡ä»¶å’Œé‡Šæ”¾èµ„æºï¼Œé¿å…èµ„æºæ³„æ¼ã€‚

- ä½¿ç”¨ `gc` æ¨¡å—: `gc` æ¨¡å—æä¾›äº†ä¸€äº›å‡½æ•°ï¼Œå¯ä»¥æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶æœºåˆ¶ã€‚

**å¦‚ä½•é¿å…è¢«é”™è¯¯çš„åƒåœ¾å›æ”¶**

- å¼•ç”¨è®¡æ•°: å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 0 æ—¶ï¼Œå¯¹è±¡ä¼šè¢«é”€æ¯ã€‚å¦‚æœå¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸ä¸º 0ï¼Œå¯¹è±¡å°±ä¸ä¼šè¢«é”€æ¯ã€‚

è¿™ä¸ªå¯ä»¥é€šè¿‡ä¿æŒæ˜¾å¼å¼•ç”¨æ¥é¿å…å¯¹è±¡è¢«é”€æ¯ã€‚

åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ª `PhotoImage` å¯¹è±¡æ—¶ï¼Œç”±äº `Tkiner` ä¸ä¼šç®¡ç†è¿™ä¸ªå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œå½“è¿™ä¸ªå¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œå›¾åƒå°±ä¼šæ¶ˆå¤±ï¼ˆè¡¨ç°å°±æ˜¯è«åå…¶å¦™ä¸æ˜¾ç¤ºäº†ï¼‰ã€‚

```python
# æ²¡æœ‰æ˜¾å¼åº”ç”¨
photo_image = ImageTk.PhotoImage(image)
image_label = tk.Label(image_frame, image=photo_image)
image_label.pack()
# æ˜¾å¼åº”ç”¨
photo_image = ImageTk.PhotoImage(image)
image_label = tk.Label(image_frame, image=photo_image)
image_label.image = photo_image
image_label.pack()
```

åœ¨è¿™é‡Œï¼Œé€šè¿‡å°† `PhotoImage` å¯¹è±¡èµ‹å€¼ç»™ `Label` çš„ `image` å±æ€§ï¼Œä½ å¯ä»¥ç¡®ä¿ `PhotoImage` å¯¹è±¡åœ¨ `Label` å­˜åœ¨æœŸé—´ä¿æŒæ´»åŠ¨çŠ¶æ€ï¼Œä»è€Œé˜²æ­¢å›¾åƒæ„å¤–æ¶ˆå¤±ã€‚è¿™æ˜¯ Tkinter å¤„ç†ä¸­å¸¸è§çš„åšæ³•ã€‚

- å¼ºåˆ¶å¼•ç”¨: å¯ä»¥ä½¿ç”¨å¼ºåˆ¶å¼•ç”¨æ¥é˜»æ­¢å¯¹è±¡è¢«é”€æ¯ã€‚å¼ºåˆ¶å¼•ç”¨å¯ä»¥é€šè¿‡ `gc.get_referrers()` å‡½æ•°æ¥è·å–ã€‚

```python
import gc

class A:
    pass

a = A()

# å¼ºåˆ¶å¼•ç”¨
gc.get_referrers(a)
```

## pip å’Œ virtualenv

### pip

`pip` æ˜¯ Python çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç”¨äºå®‰è£…å’Œç®¡ç† Python åŒ…ã€‚

å¸¸ç”¨å‘½ä»¤åŒ…æ‹¬:

- `pip install --upgrade pip`: å‡çº§ pip

- `pip install package_name`: å®‰è£…åŒ…

- `pip uninstall package_name`: å¸è½½åŒ…

- `pip list`: åˆ—å‡ºå·²å®‰è£…çš„åŒ…

- `pip show package_name`: æ˜¾ç¤ºåŒ…çš„è¯¦ç»†ä¿¡æ¯

- `pip search package_name`: æœç´¢åŒ…

- `pip freeze > requirements.txt`: å°†å½“å‰ç¯å¢ƒä¸­å·²å®‰è£…çš„åŒ…å¯¼å‡ºåˆ° `requirements.txt` æ–‡ä»¶

- `pip install -r requirements.txt`: ä» `requirements.txt` æ–‡ä»¶ä¸­å®‰è£…åŒ…

- `pip install -e .`: ä»¥å¯ç¼–è¾‘çš„æ–¹å¼å®‰è£…åŒ…ï¼ˆå³åœ¨å½“å‰ç›®å½•ä¸‹å®‰è£…åŒ…ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹åŒ…çš„æºç ï¼‰

**pip ä¿®æ”¹é…ç½®æ–‡ä»¶**

ä½ å¯ä»¥ä½¿ç”¨ `pip config` å‘½ä»¤ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚:

```bash
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

è¿™é‡Œå°†å…¨å±€çš„ `index-url` è®¾ç½®ä¸ºæ¸…åå¤§å­¦çš„é•œåƒæºã€‚

### virtualenv

`virtualenv` æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºç‹¬ç«‹ Python ç¯å¢ƒçš„å·¥å…·ã€‚

åœ¨ Python 3.3 ä¹‹åï¼Œ`venv` æ¨¡å—å·²ç»å†…ç½®åœ¨ Python ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `python -m venv` å‘½ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€‚

- åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒ:

  ```bash
  python -m venv /path/to/new/virtual/environment
  ```

- æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ:

  ```bash
  source /path/to/new/virtual/environment/bin/activate
  ```

  æ¿€æ´»åï¼Œå‘½ä»¤è¡Œæç¤ºç¬¦ä¼šæ˜¾ç¤ºè™šæ‹Ÿç¯å¢ƒçš„åç§°ã€‚

- é€€å‡ºè™šæ‹Ÿç¯å¢ƒ:

  ```bash
  deactivate
  ```
